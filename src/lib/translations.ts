
const translations = {
  'pt-BR': {
    achievementsList: {
      first_expense: 'Primeira despesa cadastrada!',
      first_recurring: 'Primeira despesa recorrente cadastrada!',
      all_categories: 'Gastou em todas as categorias!',
      saved_month: 'Economizou no mês!',
      goal_achieved: 'Meta de economia atingida!',
      ten_expenses: '10 despesas cadastradas!',
      hundred_expenses: '100 despesas cadastradas!',
      under_budget: 'Gastos abaixo do orçamento em todas as categorias!',
      first_export: 'Primeira exportação de dados!',
      three_months_active: '3 meses seguidos usando o app!',
      all: 'Todas as conquistas'
    },
    groupByCategorySuggestion: 'Para uma experiência melhor, ative o agrupamento por categoria acima!',
  singleExpense: 'Despesa única',
  monthlyExpense: 'Mensal',
  dailyExpense: 'Diária',
  profileTitle: 'Meu Perfil',
  profileSubtitle: 'Gerencie suas informações pessoais',
  selectedAvatar: 'Avatar selecionado',
  avatar: 'Avatar',
  chooseAvatar: 'Escolha um avatar que represente você',
  basicInfo: 'Informações Básicas',
  fullName: 'Nome Completo',
  changePassword: 'Alterar Senha',
  leaveBlankPassword: 'Deixe em branco se não quiser alterar a senha',
  currentPassword: 'Senha Atual',
  newPassword: 'Nova Senha',
  confirmNewPassword: 'Confirmar Nova Senha',
  cancel: 'Cancelar',
  saveChanges: 'Salvar Alterações',
  accountInfo: 'Informações da Conta',
  status: 'Status',
  premium: 'Premium',
  free: 'Gratuito',
  type: 'Tipo',
  admin: 'Administrador',
  profileUpdated: 'Perfil atualizado com sucesso!',
  passwordsDontMatch: 'As senhas não coincidem',
  passwordMinLength: 'A senha deve ter no mínimo 6 caracteres',
  error: 'Erro ao atualizar perfil',
  email: 'Email',
  // admin e premium já existem
  createdAt: 'Criado em',
  registeredUsers: 'Usuários cadastrados',
  feedbacksReceived: 'Feedbacks recebidos',
  noFeedbacksYet: 'Nenhum feedback recebido ainda.',
    dashboard: 'Dashboard',
    expenses: 'Despesas',
    projections: 'Projeções',
    reports: 'Relatórios',
    logout: 'Sair',
    user: 'Usuário',
    appName: 'DespFamiliar',
    quickAdd: 'Adicionar Despesa Rápida',
    value: 'Valor',
    description: 'Descrição',
    category: 'Categoria',
  add: 'Adicionar',
  adding: 'Adicionando...',
    saving: 'Salvando...',
    editExpense: 'Editar Despesa',
    newExpense: 'Nova Despesa',
    save: 'Salvar',
    recurring: 'Recorrente',
    recurrenceType: 'Tipo de recorrência',
    monthly: 'Mensal',
    weekly: 'Semanal',
    yearly: 'Anual',
    date: 'Data',
    actions: 'Ações',
    search: 'Buscar',
    filter: 'Filtrar',
    searchPlaceholder: 'Buscar por descrição ou categoria...',
    allCategories: 'Todas as categorias',
    manageExpenses: 'Gerenciar Despesas',
    loadingExpenses: 'Carregando despesas...',
    tryAgain: 'Tentar novamente',
    confirmDeleteExpense: 'Tem certeza que deseja excluir esta despesa?',
    noExpensesYet: 'Nenhuma despesa cadastrada ainda',
    noExpensesFilters: 'Nenhuma despesa encontrada com os filtros aplicados',
    projectionsTitle: 'Projeções Financeiras',
    next3: 'Próximos 3 meses',
    next6: 'Próximos 6 meses',
    next12: 'Próximo ano',
    projectedSpending: 'Gastos Projetados (Próximo Mês)',
    expectedSavings: 'Economia Esperada',
  targetSavings: 'Meta de Economia',
  balance: 'Déficit/Superávit',
  historyVsProjection: 'Histórico vs Projeção de Gastos',
  projected: 'Projetado',
  trendBased: 'Baseado na Tendência',
  projectedByCategory: 'Distribuição Projetada por Categoria',
  identifiedTrends: 'Tendências Identificadas',
  increaseFood: 'Aumento em Alimentação',
  increaseFoodDetail: '+15% nos últimos 3 meses',
  reductionTransport: 'Redução em Transporte',
  reductionTransportDetail: '-8% com trabalho remoto',
  seasonalityLeisure: 'Sazonalidade em Lazer',
  seasonalityLeisureDetail: 'Picos em dezembro e janeiro',
  recommendations: 'Recomendações',
  adjustFoodBudget: 'Ajustar Orçamento de Alimentação',
  adjustFoodBudgetDetail: 'Considere aumentar o limite para R$ 650',
  savingOpportunity: 'Oportunidade de Economia',
  savingOpportunityDetail: 'Redirecione economia de transporte para metas',
  prepareSeasonality: 'Preparar para Sazonalidade',
  prepareSeasonalityDetail: 'Reserve R$ 200 extras para dezembro',
  goalsProgress: 'Progresso das Metas',
  goalEmergency: 'Emergência',
  of: 'de',
  goalTrip: 'Viagem',
  goalNewHome: 'Casa Nova',
    premiumTitle: 'Desbloqueie o Premium',
    premiumDesc: 'Acesse exportação PDF/Excel, backup, conquistas, integrações e muito mais!',
    exportPDF: 'Exportação PDF, Excel, CSV',
    backup: 'Backup e restauração em 1 clique',
    alerts: 'Alertas e conquistas exclusivas',
    advancedReports: 'Projeções e relatórios avançados',
    prioritySupport: 'Suporte prioritário',
    subscribePix: 'Assinar via Pix (R$20)',
    subscribeStripe: 'Assinar Premium (Stripe $15/mês)',
    subscribeCrypto: 'Assinar com Cripto (USD)',
    securePaymentPix: 'Pagamento seguro via Pix',
    securePaymentStripe: 'Pagamento seguro via Stripe ou Cripto',
    loading: 'Carregando...',
    achievements: 'Conquistas',
    achievementsDesc: 'Ganhe conquistas ao usar o app!',
    noAchievements: 'Nenhuma conquista ainda.',
    thisMonthSpending: 'Gastos Este Mês',
    lastMonthSpending: 'Gastos Mês Anterior',
    dailyAverage: 'Média Diária',
    monthlyProjection: 'Projeção Mensal',
    byCategoryThisMonth: 'Despesas por Categoria (Este Mês)',
    latestExpenses: 'Últimas Despesas',
    noExpensesTitle: 'Sem despesas neste período',
    noExpenses: 'Nenhuma despesa encontrada',
    vsLastMonth: 'vs mês anterior',
    // Reports page translations
    reportsTitle: 'Relatórios',
    summaryPeriod: 'Resumo do Período',
    week: 'Semana',
    month: 'Mês',
    loadingSummary: 'Carregando resumo...',
    totalExpenses: 'Total de despesas',
    topCategories: 'Top Categorias',
    noCategories: 'Nenhuma categoria',
    alertsSection: 'Alertas',
    noAlerts: 'Nenhum alerta',
    exclusiveAchievements: 'Conquistas Exclusivas',
    loadingAchievements: 'Carregando conquistas...',
    noAchievementsYet: 'Nenhuma conquista ainda.',
    from: 'De',
    to: 'Até',
    importBankStatement: 'Importar Extrato Bancário (CSV)',
    backupJSON: 'Backup (JSON)',
    exporting: 'Exportando...',
    restoreBackup: 'Restaurar Backup',
    exportCSV: 'Exportar CSV',
    exportExcel: 'Exportar Excel',
    exportPDFButton: 'Exportar PDF',
    subscribePixButton: 'Assinar via Pix (R$20)',
    loadingCharts: 'Carregando gráficos...',
    expensesByCategory: 'Despesas por Categoria',
    dailyEvolution: 'Evolução Diária',
    monthlyTotals: 'Totais Mensais',
    budgetUsage: 'do orçamento',
    loadingLocation: 'Carregando localização...',
    dateTo: 'a',
    dateFormatNote: 'Formato baseado no seu sistema',
    categories: {
      'Alimentação': 'Alimentação',
      'Transporte': 'Transporte',
      'Moradia': 'Moradia',
      'Saúde': 'Saúde',
      'Lazer': 'Lazer',
      'Outros': 'Outros',
      'Educação': 'Educação',
      'Vestuário': 'Vestuário',
      'Dívidas': 'Dívidas',
      'Cartões de Crédito': 'Cartões de Crédito'
    }
  },
  'en-US': {
    achievementsList: {
      first_expense: 'First expense added!',
      first_recurring: 'First recurring expense added!',
      all_categories: 'Spent in all categories!',
      saved_month: 'Saved money this month!',
      goal_achieved: 'Savings goal achieved!',
      ten_expenses: '10 expenses added!',
      hundred_expenses: '100 expenses added!',
      under_budget: 'Spent under budget in all categories!',
      first_export: 'First data export!',
      three_months_active: '3 months active in a row!',
      all: 'All achievements'
    },
    groupByCategorySuggestion: 'For a better experience, enable grouping by category above!',
  singleExpense: 'Single expense',
  monthlyExpense: 'Monthly',
  dailyExpense: 'Daily',
  profileTitle: 'My Profile',
  profileSubtitle: 'Manage your personal information',
  selectedAvatar: 'Selected avatar',
  avatar: 'Avatar',
  chooseAvatar: 'Choose an avatar that represents you',
  basicInfo: 'Basic Information',
  fullName: 'Full Name',
  changePassword: 'Change Password',
  leaveBlankPassword: 'Leave blank if you do not want to change the password',
  currentPassword: 'Current Password',
  newPassword: 'New Password',
  confirmNewPassword: 'Confirm New Password',
  cancel: 'Cancel',
  saveChanges: 'Save Changes',
  accountInfo: 'Account Information',
  status: 'Status',
  premium: 'Premium',
  free: 'Free',
  type: 'Type',
  admin: 'Administrator',
  profileUpdated: 'Profile updated successfully!',
  passwordsDontMatch: 'Passwords do not match',
  passwordMinLength: 'Password must be at least 6 characters',
  error: 'Error updating profile',
  email: 'Email',
  // admin e premium já existem
  createdAt: 'Created at',
  registeredUsers: 'Registered Users',
  feedbacksReceived: 'Feedbacks received',
  noFeedbacksYet: 'No feedbacks received yet.',
    dashboard: 'Dashboard',
    expenses: 'Expenses',
    projections: 'Projections',
    reports: 'Reports',
    logout: 'Logout',
    user: 'User',
    appName: 'FamilyExpense',
    quickAdd: 'Quick Add Expense',
    value: 'Amount',
    description: 'Description',
    category: 'Category',
  add: 'Add',
  adding: 'Adding...',
    saving: 'Saving...',
    editExpense: 'Edit Expense',
    newExpense: 'New Expense',
    save: 'Save',
    recurring: 'Recurring',
    recurrenceType: 'Recurrence type',
    monthly: 'Monthly',
    weekly: 'Weekly',
    yearly: 'Yearly',
    date: 'Date',
    actions: 'Actions',
    search: 'Search',
    filter: 'Filter',
    searchPlaceholder: 'Search by description or category...',
    allCategories: 'All categories',
    manageExpenses: 'Manage Expenses',
    loadingExpenses: 'Loading expenses...',
    tryAgain: 'Try again',
    confirmDeleteExpense: 'Are you sure you want to delete this expense?',
    noExpensesYet: 'No expenses recorded yet',
    noExpensesFilters: 'No expenses found with the applied filters',
    projectionsTitle: 'Financial Projections',
    next3: 'Next 3 months',
    next6: 'Next 6 months',
    next12: 'Next year',
    projectedSpending: 'Projected Spending (Next Month)',
    expectedSavings: 'Expected Savings',
  targetSavings: 'Target Savings',
  balance: 'Deficit/Surplus',
  historyVsProjection: 'Spending History vs Projection',
  projected: 'Projected',
  trendBased: 'Trend-based',
  projectedByCategory: 'Projected Distribution by Category',
  identifiedTrends: 'Identified Trends',
  increaseFood: 'Increase in Food',
  increaseFoodDetail: '+15% over the last 3 months',
  reductionTransport: 'Reduction in Transport',
  reductionTransportDetail: '-8% with remote work',
  seasonalityLeisure: 'Seasonality in Leisure',
  seasonalityLeisureDetail: 'Peaks in December and January',
  recommendations: 'Recommendations',
  adjustFoodBudget: 'Adjust Food Budget',
  adjustFoodBudgetDetail: 'Consider increasing the limit to $650',
  savingOpportunity: 'Saving Opportunity',
  savingOpportunityDetail: 'Redirect transport savings towards goals',
  prepareSeasonality: 'Prepare for Seasonality',
  prepareSeasonalityDetail: 'Set aside an extra 200 for December',
  goalsProgress: 'Goals Progress',
  goalEmergency: 'Emergency',
  of: 'of',
  goalTrip: 'Trip',
  goalNewHome: 'New Home',
    premiumTitle: 'Unlock Premium',
    premiumDesc: 'Access PDF/Excel export, backup, achievements, integrations and more!',
    exportPDF: 'PDF, Excel, CSV export',
    backup: 'One-click backup and restore',
    alerts: 'Exclusive alerts and achievements',
    advancedReports: 'Advanced projections and reports',
    prioritySupport: 'Priority support',
    subscribePix: 'Subscribe via Pix (R$20)',
    subscribeStripe: 'Subscribe Premium (Stripe $15/mo)',
    subscribeCrypto: 'Subscribe with Crypto (USD)',
    securePaymentPix: 'Secure payment via Pix',
    securePaymentStripe: 'Secure payment via Stripe or Crypto',
    loading: 'Loading...',
    achievements: 'Achievements',
    achievementsDesc: 'Earn achievements as you use the app!',
    noAchievements: 'No achievements yet.',
    thisMonthSpending: 'This Month Spending',
    lastMonthSpending: 'Last Month Spending',
    dailyAverage: 'Daily Average',
    monthlyProjection: 'Monthly Projection',
    byCategoryThisMonth: 'Expenses by Category (This Month)',
    latestExpenses: 'Latest Expenses',
    noExpensesTitle: 'No expenses in this period',
    noExpenses: 'No expenses found',
    vsLastMonth: 'vs last month',
    // Reports page translations
    reportsTitle: 'Reports',
    summaryPeriod: 'Period Summary',
    week: 'Week',
    month: 'Month',
    loadingSummary: 'Loading summary...',
    totalExpenses: 'Total expenses',
    topCategories: 'Top Categories',
    noCategories: 'No categories',
    alertsSection: 'Alerts',
    noAlerts: 'No alerts',
    exclusiveAchievements: 'Exclusive Achievements',
    loadingAchievements: 'Loading achievements...',
    noAchievementsYet: 'No achievements yet.',
    from: 'From',
    to: 'To',
    importBankStatement: 'Import Bank Statement (CSV)',
    backupJSON: 'Backup (JSON)',
    exporting: 'Exporting...',
    restoreBackup: 'Restore Backup',
    exportCSV: 'Export CSV',
    exportExcel: 'Export Excel',
    exportPDFButton: 'Export PDF',
    subscribePixButton: 'Subscribe via Pix (R$20)',
    loadingCharts: 'Loading charts...',
    expensesByCategory: 'Expenses by Category',
    dailyEvolution: 'Daily Evolution',
    monthlyTotals: 'Monthly Totals',
    budgetUsage: 'of budget',
    loadingLocation: 'Loading location...',
    dateTo: 'to',
    dateFormatNote: 'Format based on your system',
    categories: {
      'Alimentação': 'Food',
      'Transporte': 'Transport',
      'Moradia': 'Housing',
      'Saúde': 'Health',
      'Lazer': 'Leisure',
      'Outros': 'Others',
      'Educação': 'Education',
      'Vestuário': 'Clothing',
      'Dívidas': 'Debts',
      'Cartões de Crédito': 'Credit Cards'
    }
  },
  'es-ES': {
    achievementsList: {
      first_expense: '¡Primer gasto registrado!',
      first_recurring: '¡Primer gasto recurrente registrado!',
      all_categories: '¡Gastó en todas las categorías!',
      saved_month: '¡Ahorró este mes!',
      goal_achieved: '¡Meta de ahorro alcanzada!',
      ten_expenses: '¡10 gastos registrados!',
      hundred_expenses: '¡100 gastos registrados!',
      under_budget: '¡Gastó por debajo del presupuesto en todas las categorías!',
      first_export: '¡Primera exportación de datos!',
      three_months_active: '¡3 meses seguidos usando la app!',
      all: 'Todos los logros'
    },
    groupByCategorySuggestion: '¡Para una mejor experiencia, activa el agrupamiento por categoría arriba!',
  singleExpense: 'Gasto único',
  monthlyExpense: 'Mensual',
  dailyExpense: 'Diaria',
  profileTitle: 'Mi Perfil',
  profileSubtitle: 'Administra tu información personal',
  selectedAvatar: 'Avatar seleccionado',
  avatar: 'Avatar',
  chooseAvatar: 'Elige un avatar que te represente',
  basicInfo: 'Información Básica',
  fullName: 'Nombre Completo',
  changePassword: 'Cambiar Contraseña',
  leaveBlankPassword: 'Déjalo en blanco si no deseas cambiar la contraseña',
  currentPassword: 'Contraseña Actual',
  newPassword: 'Nueva Contraseña',
  confirmNewPassword: 'Confirmar Nueva Contraseña',
  cancel: 'Cancelar',
  saveChanges: 'Guardar Cambios',
  accountInfo: 'Información de la Cuenta',
  status: 'Estado',
  premium: 'Premium',
  free: 'Gratis',
  type: 'Tipo',
  admin: 'Administrador',
  profileUpdated: '¡Perfil actualizado con éxito!',
  passwordsDontMatch: 'Las contraseñas no coinciden',
  passwordMinLength: 'La contraseña debe tener al menos 6 caracteres',
  error: 'Error al actualizar el perfil',
  email: 'Correo',
  // admin e premium já existem
  createdAt: 'Creado en',
  registeredUsers: 'Usuarios registrados',
  feedbacksReceived: 'Feedbacks recibidos',
  noFeedbacksYet: 'Aún no se ha recibido feedback.',
    dashboard: 'Panel',
    expenses: 'Gastos',
    projections: 'Proyecciones',
    reports: 'Informes',
    logout: 'Salir',
    user: 'Usuario',
    appName: 'DespFamiliar',
    quickAdd: 'Agregar Gasto Rápido',
    value: 'Valor',
    description: 'Descripción',
    category: 'Categoría',
  add: 'Agregar',
  adding: 'Agregando...',
    saving: 'Guardando...',
    editExpense: 'Editar Gasto',
    newExpense: 'Nuevo Gasto',
    save: 'Guardar',
    recurring: 'Recurrente',
    recurrenceType: 'Tipo de recurrencia',
    monthly: 'Mensual',
    weekly: 'Semanal',
    yearly: 'Anual',
    date: 'Fecha',
    actions: 'Acciones',
    search: 'Buscar',
    filter: 'Filtrar',
    searchPlaceholder: 'Buscar por descripción o categoría...',
    allCategories: 'Todas las categorías',
    manageExpenses: 'Gestionar Gastos',
    loadingExpenses: 'Cargando gastos...',
    tryAgain: 'Inténtalo de nuevo',
    confirmDeleteExpense: '¿Seguro que deseas eliminar este gasto?',
    noExpensesYet: 'Aún no hay gastos registrados',
    noExpensesFilters: 'No se encontraron gastos con los filtros aplicados',
    projectionsTitle: 'Proyecciones Financieras',
    next3: 'Próximos 3 meses',
    next6: 'Próximos 6 meses',
    next12: 'Próximo año',
    projectedSpending: 'Gastos Proyectados (Próximo Mes)',
    expectedSavings: 'Ahorro Esperado',
  targetSavings: 'Meta de Ahorro',
  balance: 'Déficit/Superávit',
  historyVsProjection: 'Historial vs Proyección de Gastos',
  projected: 'Proyectado',
  trendBased: 'Basado en la Tendencia',
  projectedByCategory: 'Distribución Proyectada por Categoría',
  identifiedTrends: 'Tendencias Identificadas',
  increaseFood: 'Aumento en Alimentación',
  increaseFoodDetail: '+15% en los últimos 3 meses',
  reductionTransport: 'Reducción en Transporte',
  reductionTransportDetail: '-8% con trabajo remoto',
  seasonalityLeisure: 'Estacionalidad en Ocio',
  seasonalityLeisureDetail: 'Picos en diciembre y enero',
  recommendations: 'Recomendaciones',
  adjustFoodBudget: 'Ajustar Presupuesto de Alimentación',
  adjustFoodBudgetDetail: 'Considera aumentar el límite a $650',
  savingOpportunity: 'Oportunidad de Ahorro',
  savingOpportunityDetail: 'Redirige el ahorro de transporte a metas',
  prepareSeasonality: 'Prepararse para la Estacionalidad',
  prepareSeasonalityDetail: 'Reserva 200 extra para diciembre',
  goalsProgress: 'Progreso de Metas',
  goalEmergency: 'Emergencia',
  of: 'de',
  goalTrip: 'Viaje',
  goalNewHome: 'Casa Nueva',
    premiumTitle: 'Desbloquea Premium',
    premiumDesc: '¡Accede a exportación PDF/Excel, backup, logros, integraciones y más!',
    exportPDF: 'Exportación PDF, Excel, CSV',
    backup: 'Backup y restauración en 1 clic',
    alerts: 'Alertas y logros exclusivos',
    advancedReports: 'Proyecciones e informes avanzados',
    prioritySupport: 'Soporte prioritario',
    subscribePix: 'Suscribirse vía Pix (R$20)',
    subscribeStripe: 'Suscribirse Premium (Stripe $15/mes)',
    subscribeCrypto: 'Suscribirse con Cripto (USD)',
    securePaymentPix: 'Pago seguro vía Pix',
    securePaymentStripe: 'Pago seguro vía Stripe o Cripto',
    loading: 'Cargando...',
    achievements: 'Logros',
    achievementsDesc: '¡Gana logros al usar la aplicación!',
    noAchievements: 'Aún no hay logros.',
    thisMonthSpending: 'Gasto de Este Mes',
    lastMonthSpending: 'Gasto del Mes Pasado',
    dailyAverage: 'Promedio Diario',
    monthlyProjection: 'Proyección Mensual',
    byCategoryThisMonth: 'Gastos por Categoría (Este Mes)',
    latestExpenses: 'Gastos Recientes',
    noExpensesTitle: 'Sin gastos en este período',
    noExpenses: 'No se encontraron gastos',
    vsLastMonth: 'vs mes pasado',
    // Reports page translations
    reportsTitle: 'Informes',
    summaryPeriod: 'Resumen del Período',
    week: 'Semana',
    month: 'Mes',
    loadingSummary: 'Cargando resumen...',
    totalExpenses: 'Total de gastos',
    topCategories: 'Top Categorías',
    noCategories: 'Sin categorías',
    alertsSection: 'Alertas',
    noAlerts: 'Sin alertas',
    exclusiveAchievements: 'Logros Exclusivos',
    loadingAchievements: 'Cargando logros...',
    noAchievementsYet: 'Aún no hay logros.',
    from: 'Desde',
    to: 'Hasta',
    importBankStatement: 'Importar Estado Bancario (CSV)',
    backupJSON: 'Respaldo (JSON)',
    exporting: 'Exportando...',
    restoreBackup: 'Restaurar Respaldo',
    exportCSV: 'Exportar CSV',
    exportExcel: 'Exportar Excel',
    exportPDFButton: 'Exportar PDF',
    subscribePixButton: 'Suscribirse vía Pix (R$20)',
    loadingCharts: 'Cargando gráficos...',
    expensesByCategory: 'Gastos por Categoría',
    dailyEvolution: 'Evolución Diaria',
    monthlyTotals: 'Totales Mensuales',
    budgetUsage: 'del presupuesto',
    loadingLocation: 'Cargando ubicación...',
    dateTo: 'a',
    dateFormatNote: 'Formato basado en su sistema',
    categories: {
      'Alimentação': 'Alimentación',
      'Transporte': 'Transporte',
      'Moradia': 'Vivienda',
      'Saúde': 'Salud',
      'Lazer': 'Ocio',
      'Outros': 'Otros',
      'Educação': 'Educación',
      'Vestuário': 'Vestimenta',
      'Dívidas': 'Deudas',
      'Cartões de Crédito': 'Tarjetas de Crédito'
    }
  },
};

export function useTranslation(language: string) {
  const t = (key: string, defaultValue?: string): string => {
    const keys = key.split('.');
    let value: Record<string, unknown> | string = translations[language as keyof typeof translations];
    
    for (const k of keys) {
      if (value && typeof value === 'object' && k in value) {
        value = (value as Record<string, unknown>)[k] as Record<string, unknown> | string;
      } else {
        return defaultValue || key;
      }
    }
    
    return typeof value === 'string' ? value : defaultValue || key;
  };
  
  return { t };
}

export default translations;

// Normalize language codes to the keys used in `translations`.
export function resolveLanguage(lang?: string) {
  if (!lang) return 'pt-BR';
  const l = lang.toLowerCase();
  if (l.startsWith('pt')) return 'pt-BR';
  if (l.startsWith('es')) return 'es-ES';
  if (l.startsWith('en')) return 'en-US';
  return 'pt-BR';
}
